---
title: "Far From Out of the Woods"
date: 2020-05-18T21:13:14-05:00
---
 
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(scales)
library(extrafont)
library(gganimate)
library(magick)
library(xts)
library(ggrepel)
library(gifski)
library(Cairo)
library(tibbletime)
```
&nbsp;
&nbsp;
 
There surely isn't a country right now whose people aren't collectively wondering when things will be totally back to normal, and whether things can ever be the kind of normal they were before. For countries that have battled the virus to a trickle of new cases or none at all, many appear well on their way in opening their economies up, yet their paths to normalcy resemble less a snapback than a slow, incremental recovery still constrained by uncertainty. For countries in the midst of outbreaks, particularly the US, there exists significant pressure to begin or continue normalizing and lessen the economic damage being wrought. At this point, however, the risk of a Wave 2 appears high. 

```{r setup2, include=FALSE}
## data from https://data.humdata.org/dataset/novel-coronavirus-2019-ncov-cases

raw_dat <- read_csv("D:\\Documents\\R directory\\covid19\\cases.csv")

dat <- raw_dat %>%
  as_tibble() %>% 
  rename(Province = `Province/State`, Country = `Country/Region`) %>% 
  select(-Province,-Lat,-Long) %>% 
  group_by(Country) %>%
  summarise_all(sum) %>%
  rownames_to_column() %>% 
  gather(var, value, -rowname) %>% 
  spread(rowname, value) %>% 
  mutate(var = as.Date(var, "%m/%d/%Y")) %>% 
  arrange(var)


colnames(dat) <- dat[nrow(dat),] 
  
rec_count <- tail(dat[-nrow(dat),],1)
my_names <- colnames(dat)[as.numeric(rec_count[1,]) > 1000][-1]
dat_sm <- dat %>%
  rename(date = 'NA') %>% 
  select(date, my_names, Singapore)

dat_sm2 <- dat_sm[-nrow(dat),] %>% 
  rename('S Korea' = 'Korea, South') %>%
  rename(UK = 'United Kingdom') %>% 
  mutate(date = as.Date(date, "%m/%d/%Y")) %>%
  arrange(date)

dat_sm3 <- dat_sm2[,-1] %>% 
  map(.f = function(x) {as.numeric(x)}) %>% 
  cbind(dat_sm2[,1]) %>% 
  select(date, everything()) %>% 
  as_data_frame()

dat_sm4 <- dat_sm3 %>% 
  gather(key, value, -date)

dat_sm5 <- dat_sm4 %>% 
  mutate(crossover = case_when(value >= 100 & lag(value,1) < 100 ~ 1,
                               TRUE ~ 0)) %>% 
  group_by(key, idx = cumsum(crossover == 1L)) %>% 
  mutate(counter = row_number(),
         counter = as.numeric(counter)) %>% 
  mutate(days = case_when(value < 100 ~ 0,
                          value > 100 ~ counter)) %>% 
  ungroup() %>% 
  select(-crossover, -idx, -counter) %>% 
  filter(days > 0) %>% 
  mutate(days = days - 1)

dat_c <- dat_sm5
dat_lab <- dat_c %>% filter(key == "US" | key == "UK" | key == "China" | key == "Italy" | key == "S Korea" |
                            key == "Japan" | key == "Singapore" | key == "India" | key == "Spain" | 
                            key == "France" | key == "Australia" | key == "Brazil" | key == "Turkey" | 
                            key == "Iran")

```


```{r chart, echo=FALSE, warning=FALSE, message = FALSE, tidy=FALSE}
fmt_dcmls <- function(decimals = 0) {
  function(x) as.character(round(x, decimals))
}


colors <- c('aqua' = "#45BCC9", 'green' = "#648C2E", 'deep blue' = "#00567D",
            'espresso' = "#310008", 'sand' = "#E1D1A7", 'orange' = "#F38B00",
            'red' = "#A51D31", 'dark grey' = "8E8279", 'border grey' = "#808080",
            'text' = "#222222" , 'light grey' = "#CDCDCD")

cpal <- function(...) {
  cols <- c(...)
  if (is.null(cols))
    return(colors)
  colors[[cols]]
}

ctitle_1 <- "COVID-19 case trajectories"
unit_label <- "Cumulative # of cases, by number of days since 100th case"
source_1 <- "Source: JHU, WHO, @benbakkum." 

line_cols <- c("US" = "#1f78b4", "China" = "#b15928", "Spain" = "#e31a1c", "Italy" = "#1f78b4", 
               "S Korea" = "#a6cee3", "Turkey" = "#6a3d9a", "UK" = "#fb9a99", "India" = "#33a02c",
               "Brazil" = "#ff9832", "Australia" = "#cab2d6", "France" = "#6a3d9a", "Germany" = "#CDCDCD",
               "Canada" = "#CDCDCD", "Austria" = "#CDCDCD", "Luxembourg" = "#CDCDCD", "Peru" = "#CDCDCD",
               "Malaysia" = "#CDCDCD", "Mexico" = "#CDCDCD", "Netherlands" = "#CDCDCD", "Norway" = "#CDCDCD",
               "Pakistan" = "#CDCDCD", "Philippines" = "#CDCDCD", "Poland" = "#CDCDCD", "Portugal" = "#CDCDCD",
               "Romania" = "#CDCDCD", "Saudi Arabia" = "#CDCDCD", "South Africa" = "#CDCDCD", 
               "Sweden" = "#CDCDCD", "Switzerland" = "#CDCDCD", "Thailand" = "#CDCDCD", "Belgium" = "#CDCDCD",
               "Chile" = "#CDCDCD", "Czechia" = "#CDCDCD", "Denmark" = "#CDCDCD", "Finland" = "#CDCDCD",
               "Ecuador" = "#CDCDCD", "Greece" = "#CDCDCD", "Indonesia" = "#CDCDCD", "Iran" = "#e84749",
               "Ireland" = "#CDCDCD", "Israel" = "#CDCDCD", "Japan" = "#fdbf6f", "Singapore" = "#CDCDCD",
               "Russia" = "#CDCDCD", "Iceland" = "#CDCDCD", "Panama" = "#CDCDCD", "Serbia" = "#CDCDCD",
               "Qatar" = "#CDCDCD", "Qatar" = "#CDCDCD", "United Arab Emirates" = "#CDCDCD",
               "Algeria" = "#CDCDCD", "Colombia" = "#CDCDCD", "Croatia" = "#CDCDCD", 
               "Dominican Republic" = "#CDCDCD", "Argentina" = "#CDCDCD", "Ukraine" = "#CDCDCD",
               "Egypt" = "#CDCDCD", "Estonia" = "#CDCDCD", "Morocco" = "#CDCDCD", "Moldova" = "#CDCDCD",
               "Slovenia" = "#CDCDCD", "New Zealand" = "#CDCDCD", "Belarus" = "#CDCDCD",
               "Lithuania" = "#CDCDCD", "Azerbaijan" = "#CDCDCD", "North Macedonia" = "#CDCDCD",
               "Oman" = "#CDCDCD", "Slovakia" = "#CDCDCD", "Slovenia" = "#CDCDCD", "Uzbekistan" = "#CDCDCD",
               "Bosnia and Herzegovina" = "#CDCDCD", "Armenia" = "#CDCDCD", "Iraq" = "#CDCDCD",
               "Kazakhstan" = "#CDCDCD", "Kuwait" = "#CDCDCD", "Bangladesh" = "#CDCDCD", 
               "Afghanistan" = "#CDCDCD", "Ghana" = "#CDCDCD", "Cuba" = "#CDCDCD", "Cameroon" = "#CDCDCD",
               "Bulgaria" = "#CDCDCD", "Cote d'Ivoire" = "#CDCDCD", "Nigeria" = "#CDCDCD",
               "Sudan" = "#CDCDCD", "Tunisia" = "#CDCDCD", "Djibouti" = "#CDCDCD", "Honduras" = "#CDCDCD",
               "Guinea" = "#CDCDCD", "Senegal" = "#CDCDCD", "Bolivia" = "#CDCDCD", "Maldives" = "#CDCDCD",
               "Somalia" = "#CDCDCD", "Congo (Kinshasa)" = "#CDCDCD", "El Salvador" = "#CDCDCD",
               "Gabon" = "#CDCDCD", "Kyrgyzstan" = "#CDCDCD", "Latvia" = "#CDCDCD", "Guatemala" = "#CDCDCD",
               "West Bank and Gaza" = "#CDCDCD")


chart1 <- ggplot(data = dat_c, aes(x = days, y = value, color = key, label = format(date, '%b %d'))) +
  geom_text(data = filter(dat_c, key == "China"), aes(86, 150), color = "#808080", size = 13, alpha = .8, 
            family = "Open Sans") +
  geom_line(size = 1.1, alpha = 0.65) +
  scale_y_log10(labels = comma, breaks = c(100, 200, 500, 1000, 2000, 5000, 10000, 
                                           20000, 50000, 100000, 200000, 500000, 1000000)) +
  scale_color_manual(values = line_cols) +
  geom_point(data = dat_lab, aes(x = days, y = value), size = 2.7) +
  geom_text(data = dat_lab, aes(x = days, y = value, label = key), nudge_x = 3.5, nudge_y = 0.15,
                                show.legend = FALSE, size = 4, family = "Open Sans", fontface = "bold") +
  scale_x_continuous(limits = c(0, 100), expand = c(0,0)) +
  theme(
    legend.position = "none",
    panel.background = element_rect(fill = "white"),
    panel.grid.major = element_line(color = cpal("light grey"), size = 0.21),
    panel.border = element_rect(fill = NA, color = cpal("border grey"), size = 0.3),
    plot.title = element_text(size = 21, color = "black", family = "Open Sans Light"),
    plot.subtitle = element_text(size = 14, color = cpal("text"), family = "Open Sans"),
    plot.caption = element_text(size = 12.5, color = cpal("text"), family = "Open Sans"),
    text = element_text(size = 15, color = cpal("text"), family = "Open Sans"),
    legend.text = element_text(size = 15, color = cpal("text"), family = "Open Sans"),
    axis.text.x = element_text(size = 14, color = cpal("text"), family = "Open Sans",
                               margin = unit(c(0.35, 0.25, 0.25, 0.25), "cm")),
    axis.text.y = element_text(size = 14, color = cpal("text"), family = "Open Sans",
                               margin = unit(c(0.35, 0.25, 0.25, 0.25), "cm")),
    axis.title.y = element_blank(),
    axis.title.x = element_text(size = 14, color = cpal("text"), family = "Open Sans",
                               margin = unit(c(0.05, 0.05, 0.05, 0.05), "cm")),
    axis.ticks.length = unit(-0.15, "cm"),
    axis.ticks = element_line(color = cpal("border grey"), size = 0.3),
    plot.margin = unit(c(0.3, 0.5, 0.3, 0.05), "cm")
  ) + 
  labs(title = ctitle_1, subtitle = unit_label, x = "Number of days since 100th case",
       caption = paste("Data as of ", format(tail(dat_c$date,1), "%b %d, %Y"), ". ", source_1[1], sep = "")) +
  transition_reveal(date, keep_last = TRUE) +
  ease_aes('linear')
  
anim1 <- animate(chart1, renderer = gifski_renderer(loop = T), nframe = 475,
                 width = 615, height = 420, type = "cairo", end_pause = 200)  

anim1
```

The chart above showing the cumulative number of cases across countries illustrates the effectiveness of shutdowns and other policy measures implemented to flatten the curve. Yet on a log scale, what favorably looks as the case counts leveling off at the top of the chart can disguise still large daily increases in reported cases. The chart below showing the non-cumulative change in new daily cases indicates that the US and several Western European countries have halted the growth in daily cases, and in some cases are seeing declines, but that the daily increases in the case count have almost held steady over recent weeks. Certainly the change in the growth of cases for these countries has not had the same pace on the way down as the exponential increase on the way up.

```{r setup-new_cases, include=FALSE}
## data from https://data.humdata.org/dataset/novel-coronavirus-2019-ncov-cases

raw_dat <- read_csv("D:\\Documents\\R directory\\covid19\\cases.csv")

dat <- raw_dat %>%
  as_tibble() %>% 
  rename(Province = `Province/State`, Country = `Country/Region`) %>% 
  select(-Province,-Lat,-Long) %>% 
  group_by(Country) %>%
  summarise_all(sum) %>%
  rownames_to_column() %>% 
  gather(var, value, -rowname) %>% 
  spread(rowname, value) %>% 
  mutate(var = as.Date(var, "%m/%d/%Y")) %>% 
  arrange(var)


colnames(dat) <- dat[nrow(dat),] 
  
rec_count <- tail(dat[-nrow(dat),],1)
my_names <- colnames(dat)[as.numeric(rec_count[1,]) > 1000][-1]
dat_sm <- dat %>%
  rename(date = 'NA') %>% 
  select(date, my_names, Singapore)

dat_sm2 <- dat_sm[-nrow(dat),] %>% 
  rename('S Korea' = 'Korea, South') %>%
  rename(UK = 'United Kingdom') %>% 
  mutate(date = as.Date(date, "%m/%d/%Y")) %>%
  arrange(date)

dat_sm3 <- dat_sm2[,-1] %>% 
  map(.f = function(x) {as.numeric(x)}) %>% 
  cbind(dat_sm2[,1]) %>% 
  select(date, everything())

rolling_mean <- rollify(mean, window = 7)

dat_sm3.5 <- dat_sm3[,-1] %>% 
  map(.f = function (x) {x - lag(x, 1)}) %>%
  map(.f = function (x) {rolling_mean(x)}) %>%
  as_data_frame() %>% 
  cbind(dat_sm3$date) %>% 
  rename(date = 'dat_sm3$date') %>% 
  select(date, everything()) %>% 
  as_data_frame()
  
dat_sm4 <- dat_sm3.5 %>% 
  gather(key, value, -date)

keep_cntry <- dat_sm4 %>% 
  na.omit() %>% 
  group_by(key) %>% 
  summarise(max = max(value)) %>% 
  filter(max > 50) %>% 
  select(-max)

dat_sm5 <- dat_sm4 %>% 
  filter(key %in% keep_cntry$key) %>% 
  arrange(key, date) %>% 
  mutate(crossover = case_when((value >= 20 & lag(value,1) < 20) | 
                               (key != lag(key,1))~ 1,
                               TRUE ~ 0))
  

dat_sm5[dat_sm5$date == "2020-04-23" & dat_sm5$key == "Australia", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-05-06" & dat_sm5$key == "Australia", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-03-23" & dat_sm5$key == "Bahrain", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-03-31" & dat_sm5$key == "Bahrain", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-03-29" & dat_sm5$key == "Qatar", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-03-27" & dat_sm5$key == "Bosnia and Herzegovina", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-04-16" & dat_sm5$key == "Cameroon", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-04-15" & dat_sm5$key == "Bulgaria", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-04-04" & dat_sm5$key == "Cote d'Ivoire", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-04-06" & dat_sm5$key == "Cote d'Ivoire", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-04-21" & dat_sm5$key == "Greece", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-04-16" & dat_sm5$key == "Nigeria", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-04-12" & dat_sm5$key == "Bolivia", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-04-13" & dat_sm5$key == "Guinea", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-04-10" & dat_sm5$key == "Honduras", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-04-24" & dat_sm5$key == "Honduras", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-05-02" & dat_sm5$key == "Spain", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-05-13" & dat_sm5$key == "Djibouti", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-05-14" & dat_sm5$key == "Ecuador", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-05-07" & dat_sm5$key == "Gabon", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-05-11" & dat_sm5$key == "North Macedonia", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-05-17" & dat_sm5$key == "Norway", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-05-12" & dat_sm5$key == "S Korea", "crossover"] <- 0




dat_sm6 <- dat_sm5 %>%
  group_by(key, idx = cumsum(crossover == 1L)) %>% 
  mutate(counter = row_number(),
         counter = as.numeric(counter),
         phase = case_when((idx %% 2) == 0 ~ "off",
                           (idx %% 2) != 0 ~ "on")) %>%
  ungroup() %>% 
  mutate(days = case_when(phase == "off" ~ 0,
                          phase == "on" ~ counter)) %>% 
  select(-crossover, -idx, -counter, -phase) %>% 
  filter(days > 0) %>% 
  mutate(days = days - 1)

dat_c <- dat_sm6 %>% filter(key != "France" & key != "Spain" & key != "Ecuador")
dat_lab <- dat_c %>% filter(key == "US" | key == "UK" | key == "China" | key == "Italy" | key == "S Korea" |
                            key == "Japan" | key == "India" | 
                            key == "Australia" | key == "Brazil" | key == "Turkey" | 
                            key == "Iran" | key == "Sweden" | key == "Iceland" | key == "New Zealand")

#write.csv(dat_sm5, "D:\\Documents\\R directory\\covid19\\new_cases.csv")

```


```{r chart-new_cases, echo=FALSE, warning=FALSE, message = FALSE, tidy=FALSE}
fmt_dcmls <- function(decimals = 0) {
  function(x) as.character(format(round(as.numeric(x), 0), nsmall=0, big.mark=","))
}

colors <- c('aqua' = "#45BCC9", 'green' = "#648C2E", 'deep blue' = "#00567D",
            'espresso' = "#310008", 'sand' = "#E1D1A7", 'orange' = "#F38B00",
            'red' = "#A51D31", 'dark grey' = "8E8279", 'border grey' = "#808080",
            'text' = "#222222" , 'light grey' = "#CDCDCD")

cpal <- function(...) {
  cols <- c(...)
  if (is.null(cols))
    return(colors)
  colors[[cols]]
}

ctitle_1 <- "COVID-19 daily new cases"
unit_label <- "Daily change in cases, 7 day moving average"
source_1 <- "Source: JHU, WHO, @benbakkum." 

line_cols <- c("US" = "#1f78b4", "China" = "#b15928", "Italy" = "#1f78b4", 
               "S Korea" = "#a6cee3", "Turkey" = "#6a3d9a", "UK" = "#fb9a99", "India" = "#33a02c",
               "Brazil" = "#ff9832", "Australia" = "#cab2d6", "France" = "#6a3d9a", "Germany" = "#CDCDCD",
               "Canada" = "#CDCDCD", "Austria" = "#CDCDCD", "Luxembourg" = "#CDCDCD", "Peru" = "#CDCDCD",
               "Malaysia" = "#CDCDCD", "Mexico" = "#CDCDCD", "Netherlands" = "#CDCDCD", "Norway" = "#CDCDCD",
               "Pakistan" = "#CDCDCD", "Philippines" = "#CDCDCD", "Poland" = "#CDCDCD", "Portugal" = "#CDCDCD",
               "Romania" = "#CDCDCD", "Saudi Arabia" = "#CDCDCD", "South Africa" = "#CDCDCD", 
               "Sweden" = "#1f78b4", "Switzerland" = "#CDCDCD", "Thailand" = "#CDCDCD", "Belgium" = "#CDCDCD",
               "Chile" = "#CDCDCD", "Czechia" = "#CDCDCD", "Denmark" = "#CDCDCD", "Finland" = "#CDCDCD",
               "Ecuador" = "#CDCDCD", "Greece" = "#CDCDCD", "Indonesia" = "#CDCDCD", "Iran" = "#e84749",
               "Ireland" = "#CDCDCD", "Israel" = "#CDCDCD", "Japan" = "#fdbf6f", "Singapore" = "#CDCDCD",
               "Russia" = "#CDCDCD", "Iceland" = "#a6cee3", "Panama" = "#CDCDCD", "Serbia" = "#CDCDCD",
               "Qatar" = "#CDCDCD", "Qatar" = "#CDCDCD", "United Arab Emirates" = "#CDCDCD",
               "Algeria" = "#CDCDCD", "Colombia" = "#CDCDCD", "Croatia" = "#CDCDCD", 
               "Dominican Republic" = "#CDCDCD", "Argentina" = "#CDCDCD", "Ukraine" = "#CDCDCD",
               "Egypt" = "#CDCDCD", "Estonia" = "#CDCDCD", "Morocco" = "#CDCDCD", "Moldova" = "#CDCDCD",
               "Slovenia" = "#CDCDCD", "New Zealand" = "#cab2d6", "Belarus" = "#CDCDCD",
               "Lithuania" = "#CDCDCD", "Azerbaijan" = "#CDCDCD", "North Macedonia" = "#CDCDCD",
               "Oman" = "#CDCDCD", "Slovakia" = "#CDCDCD", "Slovenia" = "#CDCDCD", "Uzbekistan" = "#CDCDCD",
               "Bosnia and Herzegovina" = "#CDCDCD", "Armenia" = "#CDCDCD", "Iraq" = "#CDCDCD",
               "Kazakhstan" = "#CDCDCD", "Kuwait" = "#CDCDCD", "Bangladesh" = "#CDCDCD", 
               "Afghanistan" = "#CDCDCD", "Ghana" = "#CDCDCD", "Cuba" = "#CDCDCD", "Cameroon" = "#CDCDCD",
               "Bulgaria" = "#CDCDCD", "Cote d'Ivoire" = "#CDCDCD", "Nigeria" = "#CDCDCD",
               "Senegal" = "#CDCDCD", "Sudan" = "#CDCDCD", "Tunisia" = "#CDCDCD", "Djibouti" = "#CDCDCD",
               "Guinea" = "#CDCDCD", "Honduras" = "#CDCDCD", "Maldives" = "#CDCDCD",
               "Somalia" = "#CDCDCD", "Congo (Kinshasa)" = "#CDCDCD", "El Salvador" = "#CDCDCD",
               "Gabon" = "#CDCDCD", "Kyrgyzstan" = "#CDCDCD", "Latvia" = "#CDCDCD", "Guatemala" = "#CDCDCD",
               "West Bank and Gaza" = "#CDCDCD")


chart1 <- ggplot(data = dat_c, aes(x = days, y = value, color = key, label = format(date, '%b %d'))) +
  geom_text(data = filter(dat_c, key == "China"), aes(86, 0.3), color = "#808080", size = 13, alpha = .8, 
            family = "Open Sans") +
  geom_line(size = 1.1, alpha = 0.65) +
  scale_y_log10(labels = fmt_dcmls(0), breaks = c(0, 1, 2, 5, 10, 20, 50, 100, 200, 500, 1000, 2000, 5000,
                                                  10000, 20000, 50000)) +
  scale_color_manual(values = line_cols) +
  geom_point(data = dat_lab, aes(x = days, y = value), size = 2.7) +
  geom_text(data = dat_lab, aes(x = days, y = value, label = key), nudge_x = 3.5, nudge_y = 0.15,
                                show.legend = FALSE, size = 4, family = "Open Sans", fontface = "bold") +
  scale_x_continuous(limits = c(0, 100), expand = c(0,0)) +
  theme(
    legend.position = "none",
    panel.background = element_rect(fill = "white"),
    panel.grid.major = element_line(color = cpal("light grey"), size = 0.21),
    panel.border = element_rect(fill = NA, color = cpal("border grey"), size = 0.3),
    plot.title = element_text(size = 21, color = "black", family = "Open Sans Light"),
    plot.subtitle = element_text(size = 14, color = cpal("text"), family = "Open Sans"),
    plot.caption = element_text(size = 12.5, color = cpal("text"), family = "Open Sans"),
    text = element_text(size = 15, color = cpal("text"), family = "Open Sans"),
    legend.text = element_text(size = 15, color = cpal("text"), family = "Open Sans"),
    axis.text.x = element_text(size = 14, color = cpal("text"), family = "Open Sans",
                               margin = unit(c(0.35, 0.25, 0.25, 0.25), "cm")),
    axis.text.y = element_text(size = 14, color = cpal("text"), family = "Open Sans",
                               margin = unit(c(0.35, 0.25, 0.25, 0.25), "cm")),
    axis.title.y = element_blank(),
    axis.title.x = element_text(size = 14, color = cpal("text"), family = "Open Sans",
                               margin = unit(c(0.05, 0.05, 0.05, 0.05), "cm")),
    axis.ticks.length = unit(-0.15, "cm"),
    axis.ticks = element_line(color = cpal("border grey"), size = 0.3),
    plot.margin = unit(c(0.3, 0.5, 0.3, 0.05), "cm")
  ) + 
  labs(title = ctitle_1, subtitle = unit_label, x = "Number of days since averaging over 20 new cases a day",
       caption = paste("Data as of ", format(tail(dat_c$date,1), "%b %d, %Y"), ". ", source_1[1], sep = "")) +
  transition_reveal(date, keep_last = TRUE) +
  ease_aes('linear')
  
anim1 <- animate(chart1, renderer = gifski_renderer(loop = T), nframe = 475,
                 width = 615, height = 420, type = "cairo", end_pause = 200)  

anim1
```

Much has been written about South Korea's success in containing its outbreak, as demonstrated in the chart above. South Korea's approach reflects effective government action, drawing on lessons learned from the country's 2015 Middle East Respiratory Syndrome (MERS) outbreak that killed 38. The government was notably quick to ramp up test production before COVID-19 became widespread, and it set up a large array of testing centers, some of which drive throughs, and others allowing walk-ins that made use of plexiglass chambers similar to phone booths. The government also implemented contact tracing a Korean epidemiologist has likened in intensity to police investigations, and Koreans have accessed alerts and apps on their phones providing detailed information on known cases in their area.^[[Max Fisher and Choe Sang-Hun, "How South Korea Flattened The Curve", _The New York Times_, March 23, 2020.](https://www.nytimes.com/2020/03/23/world/asia/coronavirus-south-korea-flatten-curve.html)] 

The chance for the US to at all mimic South Korea's approach and see similar success passed a long time ago. Volumes will be written on the botched response of the US, but the crisis isn't over, and there remains plenty of opportunity for the response to become even more historic in its failures. The defining factor will be testing. Economist Paul Romer has argued that testing doesn't require the same level of organizational capacity as contact tracing, suggesting it should be possible for the US to coordinate a mass testing effort on a scale of at least \$100 billion. Congress has appropriated $25 billion for testing in its phase 3.5 stimulus bill, but additional investment is warranted given the magnitude of economic losses due to a virus that's hard to pin down without broader testing.^[[Isaac Chotiner, "Paul Romer's Case for Nationwide Coronavirus Testing", _The New Yorker_, May 3, 2020.](https://www.newyorker.com/news/q-and-a/paul-romer-on-how-to-survive-the-chaos-of-the-coronavirus)] 

Ideally, there would be enough capacity to test everyone frequently, quickly isolating fresh cases as they appear. The ability to do that in the US will likely not materialize, but the importance of getting part of the way there lies in not only identifying hotspots and where to focus containment efforts, but also in fostering the public's confidence. States can begin to lift lockdown conditions, as a large number have already, but for the economy to fully bounce back, and for low margin businesses such as restaurants and retailers to become profitable again, the public can also no longer fear infection. The virus' death toll reflects a human experience and tragedy that has terrorized the American people and populations globally. Without robust testing that instills confidence in the safety of certain areas, many will avoid leaving their homes despite authorities assuring them they may. The drop offs in consumption even before lockdowns were implemented provide evidence of this.       

```{r setup-deaths, include=FALSE}
## data from https://data.humdata.org/dataset/novel-coronavirus-2019-ncov-cases

raw_dat <- read_csv("D:\\Documents\\R directory\\covid19\\deaths.csv")

dat <- raw_dat %>%
  as_tibble() %>% 
  rename(Province = "Province/State", Country = "Country/Region") %>% 
  select(-Province,-Lat,-Long) %>% 
  group_by(Country) %>%
  summarise_all(sum) %>%
  rownames_to_column() %>% 
  gather(var, value, -rowname) %>% 
  spread(rowname, value) %>% 
  mutate(var = as.Date(var, "%m/%d/%Y")) %>% 
  arrange(var)


colnames(dat) <- dat[nrow(dat),] 
  
rec_count <- tail(dat[-nrow(dat),],1)
my_names <- colnames(dat)[as.numeric(rec_count[1,]) > 100][-1]
dat_sm <- dat %>% 
  rename(date = "NA") %>% 
  select(date, my_names)

dat_sm2 <- dat_sm[-nrow(dat),] %>% 
  rename('S Korea' = 'Korea, South') %>%
  rename(UK = 'United Kingdom') %>% 
  mutate(date = as.Date(date, "%m/%d/%Y")) %>%
  arrange(date)

dat_sm3 <- dat_sm2[,-1] %>% 
  map(.f = function(x) {as.numeric(x)}) %>% 
  cbind(dat_sm2[,1]) %>% 
  select(date, everything()) %>% 
  as_data_frame()

dat_sm4 <- dat_sm3 %>% 
  gather(key, value, -date)

dat_sm5 <- dat_sm4 %>% 
  mutate(crossover = case_when(value >= 10 & lag(value,1) < 10 ~ 1,
                               TRUE ~ 0)) %>% 
  group_by(key, idx = cumsum(crossover == 1L)) %>% 
  mutate(counter = row_number(),
         counter = as.numeric(counter)) %>% 
  mutate(days = case_when(value < 10 ~ 0,
                          value > 10 ~ counter)) %>% 
  ungroup() %>% 
  select(-crossover, -idx, -counter) %>% 
  filter(days > 0) %>% 
  mutate(days = days - 1)

dat_c <- dat_sm5
dat_lab <- dat_c %>% filter(key == "US" | key == "UK" | key == "China" | key == "Italy" | key == "Indonesia" |
                            key == "Japan" | key == "Canada" | key == "India" | key == "Spain" | 
                            key == "France" | key == "Australia" | key == "Brazil" | key == "Turkey" | 
                            key == "Sweden" | key == "Iran" | key == "S Korea")

```


```{r chart-deaths, echo=FALSE, warning=FALSE, message = FALSE, tidy=FALSE}
fmt_dcmls <- function(decimals = 0) {
  function(x) as.character(round(x, decimals))
}

colors <- c('aqua' = "#45BCC9", 'green' = "#648C2E", 'deep blue' = "#00567D",
            'espresso' = "#310008", 'sand' = "#E1D1A7", 'orange' = "#F38B00",
            'red' = "#A51D31", 'dark grey' = "8E8279", 'border grey' = "#808080",
            'text' = "#222222" , 'light grey' = "#CDCDCD")

cpal <- function(...) {
  cols <- c(...)
  if (is.null(cols))
    return(colors)
  colors[[cols]]
}

ctitle_1 <- "Deaths due to COVID-19"
unit_label <- "Cumulative # of deaths, by number of days since ~10th death"
source_1 <- "Source: JHU, WHO, @benbakkum." 

line_cols <- c("US" = "#1f78b4", "China" = "#b15928", "Spain" = "#e31a1c", "Italy" = "#1f78b4", 
               "Canada" = "#a6cee3", "Turkey" = "#6a3d9a", "UK" = "#fb9a99", "India" = "#33a02c",
               "Brazil" = "#ff9832", "Australia" = "#cab2d6", "France" = "#6a3d9a", "Germany" = "#CDCDCD",
               "Indonesia" = "#cab2d6", "Portugal" = "#CDCDCD", "Mexico" = "#CDCDCD", "Netherlands" = "#CDCDCD",
               "Ireland" = "#CDCDCD", "Sweden" = "#1f78b4", "Switzerland" = "#CDCDCD", "Belgium" = "#CDCDCD",
               "Morocco" = "#CDCDCD", "Austria" = "#CDCDCD", "Peru" = "#CDCDCD", "Philippines" = "#CDCDCD",
               "Panama" = "#CDCDCD", "Pakistan" = "#CDCDCD", "Norway" = "#CDCDCD", "Panama" = "#CDCDCD",
               "Poland" = "#CDCDCD", "Romania" = "#CDCDCD", "Serbia" = "#CDCDCD", "Russia" = "#CDCDCD",
               "Ukraine" = "#CDCDCD", "Algeria" = "#CDCDCD", "Colombia" = "#CDCDCD", "Czechia" = "#CDCDCD",
               "Chile" = "#CDCDCD", "Serbia" = "#CDCDCD", "Denmark" = "#CDCDCD", 
               "Dominican Republic" = "#CDCDCD", "Greece" = "#CDCDCD", "Egypt" = "#CDCDCD",
               "Ecuador" = "#CDCDCD", "Argentina" = "#CDCDCD", "Hungary" = "#CDCDCD", "Israel" = "#CDCDCD", 
               "S Korea" = "#a6cee3", "Japan" = "#fdbf6f", "Bangladesh" = "#fdbf6f", 
               "Afghanistan" = "#CDCDCD", "Nigeria" = "#CDCDCD", "Moldova" = "#CDCDCD", "Malaysia" = "#CDCDCD",
               "South Africa" = "#CDCDCD", "Belarus" = "#CDCDCD", "United Arab Emirates" = "#CDCDCD",
               "Bolivia" = "#CDCDCD", "Cameroon" = "#CDCDCD", "Malaysia" = "#CDCDCD", "Honduras" = "#CDCDCD",
               "Iraq" = "#CDCDCD", "Luxembourg" = "#CDCDCD", "North Macedonia" = "#CDCDCD",
               "Slovenia" = "#CDCDCD", "Bosnia and Herzegovina" = "#CDCDCD", "Bulgaria" = "#CDCDCD",
               "Kuwait" = "#CDCDCD")


chart1 <- ggplot(data = dat_c, aes(x = days, y = value, color = key, label = format(date, '%b %d'))) +
  geom_text(data = filter(dat_c, key == "China"), aes(86, 15), color = "#808080", size = 13, alpha = .8, 
            family = "Open Sans") +
  geom_line(size = 1.1, alpha = 0.65) +
  scale_y_log10(labels = comma, breaks = c(10, 20, 50, 100, 200, 500, 1000, 
                                           2000, 5000, 10000, 20000, 50000, 100000)) +
  scale_color_manual(values = line_cols) +
  geom_point(data = dat_lab, aes(x = days, y = value), size = 2.7) +
  geom_text_repel(data = dat_lab, aes(x = days, y = value, label = key), nudge_x = 3.5, nudge_y = 0.15,
                                show.legend = FALSE, size = 4, family = "Open Sans", fontface = "bold") +
  scale_x_continuous(limits = c(0, 100), expand = c(0,0)) +
  theme(
    legend.position = "none",
    panel.background = element_rect(fill = "white"),
    panel.grid.major = element_line(color = cpal("light grey"), size = 0.21),
    panel.border = element_rect(fill = NA, color = cpal("border grey"), size = 0.3),
    plot.title = element_text(size = 21, color = "black", family = "Open Sans Light"),
    plot.subtitle = element_text(size = 14, color = cpal("text"), family = "Open Sans"),
    plot.caption = element_text(size = 12.5, color = cpal("text"), family = "Open Sans"),
    text = element_text(size = 15, color = cpal("text"), family = "Open Sans"),
    legend.text = element_text(size = 15, color = cpal("text"), family = "Open Sans"),
    axis.text.x = element_text(size = 14, color = cpal("text"), family = "Open Sans",
                               margin = unit(c(0.35, 0.25, 0.25, 0.25), "cm")),
    axis.text.y = element_text(size = 14, color = cpal("text"), family = "Open Sans",
                               margin = unit(c(0.35, 0.25, 0.25, 0.25), "cm")),
    axis.title.y = element_blank(),
    axis.title.x = element_text(size = 14, color = cpal("text"), family = "Open Sans",
                               margin = unit(c(0.05, 0.05, 0.05, 0.05), "cm")),
    axis.ticks.length = unit(-0.15, "cm"),
    axis.ticks = element_line(color = cpal("border grey"), size = 0.3),
    plot.margin = unit(c(0.3, 0.5, 0.3, 0.05), "cm")
  ) + 
  labs(title = ctitle_1, subtitle = unit_label, x = "Number of days since 10th death",
       caption = paste("Data as of ", format(tail(dat_c$date,1), "%b %d, %Y"), ". ", source_1[1], sep = "")) +
  transition_reveal(date, keep_last = TRUE) +
  ease_aes('linear')
  
anim1 <- animate(chart1, renderer = gifski_renderer(loop = T), nframe = 475,
                 width = 615, height = 420, type = "cairo", end_pause = 200) 

anim1
```

The still large number of daily deaths due to COVID-19 in the US and elsewhere demonstrates the strength and stubbornness of the virus. In the US, while the number of hospitalizations and deaths per day has now now steadily declined in New York, hotspots have emerged across the Midwest and South. The overall trend in deaths in the US indicates that the human cost will continue to increase as states begin to progress through phases of reopening. 

```{r setup-new_deaths, include=FALSE}
## data from https://data.humdata.org/dataset/novel-coronavirus-2019-ncov-cases

raw_dat <- read_csv("D:\\Documents\\R directory\\covid19\\deaths.csv")

dat <- raw_dat %>%
  as_tibble() %>% 
  rename(Province = `Province/State`, Country = `Country/Region`) %>% 
  select(-Province,-Lat,-Long) %>% 
  group_by(Country) %>%
  summarise_all(sum) %>%
  rownames_to_column() %>% 
  gather(var, value, -rowname) %>% 
  spread(rowname, value) %>% 
  mutate(var = as.Date(var, "%m/%d/%Y")) %>% 
  arrange(var)


colnames(dat) <- dat[nrow(dat),] 
  
rec_count <- tail(dat[-nrow(dat),],1)
my_names <- colnames(dat)[as.numeric(rec_count[1,]) > 100][-1]
dat_sm <- dat %>%
  rename(date = 'NA') %>% 
  select(date, my_names, Singapore)

dat_sm2 <- dat_sm[-nrow(dat),] %>% 
  rename('S Korea' = 'Korea, South') %>%
  rename(UK = 'United Kingdom') %>% 
  mutate(date = as.Date(date, "%m/%d/%Y")) %>%
  arrange(date)

dat_sm3 <- dat_sm2[,-1] %>% 
  map(.f = function(x) {as.numeric(x)}) %>% 
  cbind(dat_sm2[,1]) %>% 
  select(date, everything()) %>% 
  as_data_frame()

rolling_mean <- rollify(mean, window = 7)

dat_sm3.5 <- dat_sm3[,-1] %>% 
  map(.f = function (x) {x - lag(x, 1)}) %>%
  map(.f = function (x) {rolling_mean(x)}) %>%
  as_data_frame() %>% 
  cbind(dat_sm3$date) %>% 
  rename(date = 'dat_sm3$date') %>% 
  select(date, everything()) %>% 
  as_data_frame()
  

dat_sm4 <- dat_sm3.5 %>% 
  gather(key, value, -date)

keep_cntry <- dat_sm4 %>% 
  na.omit() %>% 
  group_by(key) %>% 
  summarise(max = max(value)) %>% 
  filter(max > 35) %>% 
  select(-max)

dat_sm5 <- dat_sm4 %>% 
  filter(key %in% keep_cntry$key) %>% 
  mutate(crossover = case_when((value >= 20 & lag(value,1) < 20) | 
                               (key != lag(key,1))~ 1,
                               TRUE ~ 0))

dat_sm5[dat_sm5$date == "2020-03-22" & dat_sm5$key == "China", "crossover"] <- 0
dat_sm5[dat_sm5$date > "2020-04-16" & dat_sm5$key == "China", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-04-18" & dat_sm5$key == "Ecuador", "crossover"] <- 0
dat_sm5[dat_sm5$date == "2020-04-27" & dat_sm5$key == "Ecuador", "crossover"] <- 0
dat_sm5[dat_sm5$date > "2020-04-16" & dat_sm5$key == "China", "value"] <- NA

##dat_sm5[dat_sm5$date == "2020-03-19" & dat_sm5$key == "France", "crossover"] <- 1


dat_sm6 <- dat_sm5 %>%
  group_by(key, idx = cumsum(crossover == 1L)) %>% 
  mutate(counter = row_number(),
         counter = as.numeric(counter),
         phase = case_when((idx %% 2) == 0 ~ "off",
                           (idx %% 2) != 0 ~ "on")) %>% 
  mutate(days = case_when(phase == "off" ~ 0,
                          phase == "on" ~ counter)) %>%
  ungroup() %>% 
  select(-crossover, -idx, -counter, -phase) %>% 
  filter(days > 0) %>% 
  mutate(days = days - 1)

dat_c <- dat_sm6
dat_lab <- dat_c %>% filter(key == "US" | key == "UK" | key == "China" | key == "Italy" | key == "S Korea" |
                            key == "Japan" | key == "India" | key == "Spain" | key == "France" | 
                            key == "Australia" | key == "Brazil" | key == "Turkey" | key == "Sweden" |
                            key == "Iran")

#write.csv(dat_sm5, "D:\\Documents\\R directory\\covid19\\new_deaths.csv")

```


```{r chart-new_deaths, echo=FALSE, warning=FALSE, message = FALSE, tidy=FALSE}
fmt_dcmls <- function(decimals = 0) {
  function(x) as.character(format(round(as.numeric(x), 0), nsmall=0, big.mark=","))
}

colors <- c('aqua' = "#45BCC9", 'green' = "#648C2E", 'deep blue' = "#00567D",
            'espresso' = "#310008", 'sand' = "#E1D1A7", 'orange' = "#F38B00",
            'red' = "#A51D31", 'dark grey' = "8E8279", 'border grey' = "#808080",
            'text' = "#222222" , 'light grey' = "#CDCDCD")

cpal <- function(...) {
  cols <- c(...)
  if (is.null(cols))
    return(colors)
  colors[[cols]]
}

ctitle_1 <- "COVID-19 daily new deaths"
unit_label <- "Daily change in deaths, 7 day moving average"
source_1 <- "Source: JHU, WHO, @benbakkum." 

line_cols <- c("US" = "#1f78b4", "China" = "#b15928", "Spain" = "#e31a1c", "Italy" = "#1f78b4", 
               "S Korea" = "#a6cee3", "Turkey" = "#6a3d9a", "UK" = "#fb9a99", "India" = "#33a02c",
               "Brazil" = "#ff9832", "Australia" = "#cab2d6", "France" = "#6a3d9a", "Germany" = "#CDCDCD",
               "Canada" = "#CDCDCD", "Austria" = "#CDCDCD", "Luxembourg" = "#CDCDCD", "Peru" = "#CDCDCD",
               "Malaysia" = "#CDCDCD", "Mexico" = "#CDCDCD", "Netherlands" = "#CDCDCD", "Norway" = "#CDCDCD",
               "Pakistan" = "#CDCDCD", "Philippines" = "#CDCDCD", "Poland" = "#CDCDCD", "Portugal" = "#CDCDCD",
               "Romania" = "#CDCDCD", "Saudi Arabia" = "#CDCDCD", "South Africa" = "#CDCDCD", 
               "Sweden" = "#1f78b4", "Switzerland" = "#CDCDCD", "Thailand" = "#CDCDCD", "Belgium" = "#CDCDCD",
               "Chile" = "#CDCDCD", "Czechia" = "#CDCDCD", "Denmark" = "#CDCDCD", "Finland" = "#CDCDCD",
               "Ecuador" = "#CDCDCD", "Greece" = "#CDCDCD", "Indonesia" = "#CDCDCD", "Iran" = "#e84749",
               "Ireland" = "#CDCDCD", "Israel" = "#CDCDCD", "Japan" = "#fdbf6f", "Singapore" = "#CDCDCD",
               "Russia" = "#CDCDCD", "Iceland" = "#CDCDCD", "Panama" = "#CDCDCD", "Serbia" = "#CDCDCD",
               "Qatar" = "#CDCDCD", "Qatar" = "#CDCDCD", "United Arab Emirates" = "#CDCDCD",
               "Algeria" = "#CDCDCD", "Colombia" = "#CDCDCD", "Croatia" = "#CDCDCD", 
               "Dominican Republic" = "#CDCDCD", "Argentina" = "#CDCDCD", "Ukraine" = "#CDCDCD",
               "Egypt" = "#CDCDCD", "Estonia" = "#CDCDCD", "Morocco" = "#CDCDCD", "Moldova" = "#CDCDCD",
               "Slovenia" = "#CDCDCD", "New Zealand" = "#CDCDCD", "Belarus" = "#CDCDCD",
               "Lithuania" = "#CDCDCD", "Azerbaijan" = "#CDCDCD", "North Macedonia" = "#CDCDCD",
               "Oman" = "#CDCDCD", "Slovakia" = "#CDCDCD", "Slovenia" = "#CDCDCD", "Uzbekistan" = "#CDCDCD",
               "Bosnia and Herzegovina" = "#CDCDCD", "Armenia" = "#CDCDCD", "Iraq" = "#CDCDCD",
               "Kazakhstan" = "#CDCDCD", "Kuwait" = "#CDCDCD", "Bangladesh" = "#CDCDCD",
               "Luxembourg" = "#CDCDCD", "North Macedonia" = "#CDCDCD",
               "Slovenia" = "#CDCDCD", "Bosnia and Herzegovina" = "#CDCDCD", "Bulgaria" = "#CDCDCD",
               "Kuwait" = "#CDCDCD")


chart1 <- ggplot(data = dat_c, aes(x = days, y = value, color = key, label = format(date, '%b %d'))) +
  geom_text(data = filter(dat_c, key == "China"), aes(86, 2500), color = "#808080", size = 13, alpha = .8, 
            family = "Open Sans") +
  geom_line(size = 1.1, alpha = 0.65) +
  scale_y_log10(labels = fmt_dcmls(0), breaks = c(2, 5, 10, 20, 50, 100, 200, 500, 1000, 2000, 5000,
                                                           10000, 20000, 50000)) +
  scale_color_manual(values = line_cols) +
  geom_point(data = dat_lab, aes(x = days, y = value), size = 2.7) +
  geom_text(data = dat_lab, aes(x = days, y = value, label = key), nudge_x = 3.5, nudge_y = 0.15,
                                show.legend = FALSE, size = 4, family = "Open Sans", fontface = "bold") +
  scale_x_continuous(limits = c(0, 100), expand = c(0,0)) +
  theme(
    legend.position = "none",
    panel.background = element_rect(fill = "white"),
    panel.grid.major = element_line(color = cpal("light grey"), size = 0.21),
    panel.border = element_rect(fill = NA, color = cpal("border grey"), size = 0.3),
    plot.title = element_text(size = 21, color = "black", family = "Open Sans Light"),
    plot.subtitle = element_text(size = 14, color = cpal("text"), family = "Open Sans"),
    plot.caption = element_text(size = 12.5, color = cpal("text"), family = "Open Sans"),
    text = element_text(size = 15, color = cpal("text"), family = "Open Sans"),
    legend.text = element_text(size = 15, color = cpal("text"), family = "Open Sans"),
    axis.text.x = element_text(size = 14, color = cpal("text"), family = "Open Sans",
                               margin = unit(c(0.35, 0.25, 0.25, 0.25), "cm")),
    axis.text.y = element_text(size = 14, color = cpal("text"), family = "Open Sans",
                               margin = unit(c(0.35, 0.25, 0.25, 0.25), "cm")),
    axis.title.y = element_blank(),
    axis.title.x = element_text(size = 14, color = cpal("text"), family = "Open Sans",
                               margin = unit(c(0.05, 0.05, 0.05, 0.05), "cm")),
    axis.ticks.length = unit(-0.15, "cm"),
    axis.ticks = element_line(color = cpal("border grey"), size = 0.3),
    plot.margin = unit(c(0.3, 0.5, 0.3, 0.05), "cm")
  ) + 
  labs(title = ctitle_1, subtitle = unit_label, x = "Number of days since averaging over 20 daily deaths",
       caption = paste("Data as of ", format(tail(dat_c$date,1), "%b %d, %Y"), ". ", source_1[1], sep = "")) +
  transition_reveal(date, keep_last = TRUE) +
  ease_aes('linear')
  
anim1 <- animate(chart1, renderer = gifski_renderer(loop = T), nframe = 475,
                 width = 615, height = 420, type = "cairo", end_pause = 200)  

anim1
```

Researchers at Columbia that have attempted to account for easing in stay-at-home orders in 25 states estimate a rebound in COVID-19 cases and deaths by the end of May. As with the initial outbreak, a lag in confirming cases after infection and insufficient testing supplies would likely mask a resurgence and a return to exponential growth rates in cases, the researchers noted. Porous state borders increase the likelihood that second waves in states quicker to reopen spillover into other states. The risk that the US will still be struggling to contain a widespread virus in the fall is high. Whether or not a Wave 2 crashes soon, the confidence required by the public to resume business as usual remains far off on the horizon.^[[Timothy S. Paul, "Projections Suggest Potential Late May COVID-19 Rebound", Columbia Mailman School of Public Health, May 7, 2020.](https://www.publichealth.columbia.edu/public-health-now/news/projections-suggest-potential-late-may-covid-19-rebound)]  







